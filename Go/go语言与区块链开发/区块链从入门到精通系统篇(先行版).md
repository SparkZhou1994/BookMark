# 比特币诞生背景
## 为何适合作为金融货币
### 比特币如何解决拜占庭将军问题
- 数字签名
- 最长链，因为不知道世界上有多少人在用比特币，每次以最长的链为准绳
- POW机制，作恶成本高
# 比特币介绍
## 比特币交易简单介绍
- 交易创建
- 通过网络传播
- 交易验证（签名）
- 验证结果通过网络传播（通过算力，10分钟记一次帐）
- 交易写入账本
## 与传统记账方式的对比
### 区块是什么
记录多条交易的一页账单
### 区块链是什么
按照时间顺序将多个账单装订在一起形成的账本
## 比特币和区块链关系
- 区块链是由比特币的底层支撑系统
- 区块链是从比特币抽离出来的概念，由比特币产生
## 比特币（区块链）使用
### 哈希算法
### 密码学
#### 非对称加密应用
##### 比特币地址
通过私钥使用椭圆曲线乘法这个单向加密函数产生一个公钥。有了公钥，使用一个单向加密哈希函数产生比特币地址。
公钥到比特币地址的过程
- 公钥 通过 双哈希 HASH160（SHA256 RIPEMD160）得到 公钥哈希（20字节）
- 公钥哈希通过 Base58check编码（前缀版本为0x00）得到 比特币地址
### P2P网络（用于 广播交易， 同步账本）
### 默克尔树 (用于快速验证交易)
Merkle Tree 称为 Hash Tree，存储hash值的一棵平衡二叉树
## 比特币相关参数
- 区块大小上限 1M
- 总计 2100 万枚， 2140年挖完
- 每10分钟一个区块，通过难度值调整实现
- 21万个 区块后奖励减半，大约四年，目前奖励12.5（2018年）
- 1btc = 10^8 聪明 satoshi
## 比特币区块结构
### 区块结构
|字节|字段|说明|
|:-:|:-:|:-:|
|4|区块大小||
|80|区块头||
|1-9|交易计数器|该区块包含的交易数量|
|不定|交易|交易信息，使用原生的交易信息格式，并且交易在数据流中的位置必须与Merkle树的叶子节点顺序一致|
区块大小目前严格限制在1MB内（除了区块大小）
### 区块头
|字节|字段|说明|
|:-:|:-:|:-:|
|4|版本|区块版本号，表示本区块遵守的验证规则|
|32|父区块头哈希值|使用SHA256|
|32|Merkle根|该区块中交易的Merkle树根的哈希值，使用SHA256|
|4|时间戳|该区块产生的近似时间，精准到秒的UNIX时间戳，必须严格大于前11个区块时间的中值，同时全节点也会拒绝那些超出自己2个小时时间戳的区块|
|4|难度目标|该区块工作量证明算法的难度目标，已经使用特定算法编码|
|4|Nonce|为了找到满足难度目标所设定的随机数，为了解决32位随机数载算力飞升的情况下不够用的问题，规定时间戳和coinbase交易信息均可更改，以此拓展nonce的位数|
区块不存储hash值，节点接受区块后独立计算并存储在本地
















